{% set random_num = range(1,9)|random %}

{% extends "base.html" %}

{% block page_content %}
<div class="container col-xxl-8 px-1 py-1">
    <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
      <div class="col-10 col-sm-8 col-md-6">
        <img id="front-image" src="{{ url_for('static', path='img/sleeping_scientist_' ~ random_num ~'.png') }}" class="d-block mx-lg-auto img-fluid" alt="Sleep scientist at work" loading="lazy" width="400" height="300">
      </div>
      <div class="col-md-6">
        <h4 class="display-6 fw-bold lh-1 mb-3">Data Upload Portal</h4>
        <p class="lead">Welcome to the Sleep Revolution Data Upload Portal, a platform for participating research centers to securely submit their sleep measurement data. Upload individual zip files containing a single sleep study, which will then be accessible on the scoring platform at <a href="#">https://score.sleep.ru.is</a> . </p>
        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
        </div>
      </div>
    </div>
  </div>


<div class="container">
    
    <h3>Upload a zip file</h3>

    <form action="/uploadfile" enctype="multipart/form-data" method="post" autocomplete="off" id="upload-form">
      <div class="bg-light p-5 rounded-lg m-3">
          <label for="file" class="form-label">File Input</label>
          <input class="form-control" type="file" id="file" name="file">
      </div>
      <div class="bg-light rounded-lg m-3">
          <div class="d-grid gap-2">
              <button id="upload-button" class="btn btn-primary" type="submit">
                  <i class="bx bxs-cloud-upload" style="font-size:1.4em;"></i>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display:none;"></span>
                  Submit
              </button>
          </div>
      </div>
  </form>


    
    
</div>

{% endblock %}


{% block extrascripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  $(document).ready(function () {
      $('#upload-form').on('submit', function (e) {
          var fileInput = $('#file').val();

          if (fileInput !== '') {
              $('#upload-button').prop('disabled', true);
              $('#upload-button .spinner-border').css('display', 'inline-block');
          }
      });
  });
</script>

{% endblock %}

